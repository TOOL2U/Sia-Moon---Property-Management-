# üóÑÔ∏è FIREBASE COLLECTIONS QUICK REFERENCE

**Date:** January 5, 2026  
**Purpose:** Quick lookup for database structure, field names, and relationships  
**For:** All developers working with Firestore

---

## üìä COLLECTIONS OVERVIEW

| Collection | Count | Status | Purpose | Critical For |
|------------|-------|--------|---------|-------------|
| `bookings` | 3 | ‚úÖ Active | Source of truth for bookings | Job creation trigger |
| `jobs` | 6 | ‚úÖ Active | Job assignments for mobile staff | Mobile app |
| `calendar_events` | 6 | ‚úÖ Active | Calendar display in backoffice | Calendar view |
| `staff_accounts` | 14 | ‚úÖ Active | Staff authentication & assignment | Mobile login, job assignment |
| `properties` | 1+ | ‚úÖ Active | Property details with photos/access | Job enrichment |
| `live_bookings` | 0 | ‚ö†Ô∏è Legacy | Historical Make.com bookings | Being phased out |
| `notifications` | 0+ | ‚úÖ Active | Push notifications for staff | Mobile notifications |
| `staff_locations` | 0+ | ‚úÖ Active | GPS tracking data | Staff monitoring |

---

## 1Ô∏è‚É£ BOOKINGS COLLECTION

### **Collection Name:** `bookings`

### **Document Structure:**
```typescript
{
  // Document ID: Auto-generated by Firestore
  
  // ========== GUEST INFORMATION ==========
  guestName: string                    // Required
  guestEmail?: string                  // Optional
  guestContact?: string                // Optional (phone or email)
  numberOfGuests: number               // Required (minimum 1)
  
  // ========== PROPERTY REFERENCE ==========
  propertyId: string                   // Required (links to properties collection)
  propertyName: string                 // Required (denormalized for display)
  propertyAddress?: string             // Optional (denormalized)
  
  // ========== BOOKING DATES ==========
  checkInDate: Timestamp | string      // Required
  checkOutDate: Timestamp | string     // Required
  
  // ========== FINANCIAL ==========
  totalAmount?: number                 // Optional
  currency?: string                    // Optional (default: "USD")
  paymentStatus?: string               // Optional
  
  // ========== STATUS ==========
  status: string                       // Required: 'pending' | 'approved' | 'confirmed' | 'cancelled'
  
  // ========== JOB CREATION TRACKING ==========
  jobsCreated?: boolean                // Set to true after jobs created
  jobsCreatedAt?: Timestamp            // When jobs were created
  createdJobIds?: string[]             // Array of created job IDs
  
  // Circuit breaker fields
  jobCreationError?: string            // Error message if job creation failed
  jobCreationAttempts?: number         // Number of retry attempts (max 3)
  skipJobCreation?: boolean            // Circuit breaker flag
  lastJobCreationAttempt?: Timestamp   // Last attempt timestamp
  
  // ========== METADATA ==========
  createdAt: Timestamp                 // Required (auto-generated)
  updatedAt: Timestamp                 // Required (auto-updated)
  bookingSource?: string               // Optional (e.g., "webapp", "make.com")
  bookingReference?: string            // Optional (external reference ID)
}
```

### **Relationships:**
- `propertyId` ‚Üí `properties` collection
- Triggers job creation when `status` = 'approved'
- Created jobs link back via `bookingId`

### **Indexes Required:**
```json
{
  "collectionGroup": "bookings",
  "queryScope": "COLLECTION",
  "fields": [
    { "fieldPath": "status", "order": "ASCENDING" },
    { "fieldPath": "createdAt", "order": "DESCENDING" }
  ]
}
```

### **Common Queries:**
```typescript
// Get all bookings ordered by date
const q = query(
  collection(db, 'bookings'),
  orderBy('createdAt', 'desc')
);

// Get pending approval bookings
const q = query(
  collection(db, 'bookings'),
  where('status', '==', 'pending')
);

// Get approved bookings without jobs (for monitoring)
const q = query(
  collection(db, 'bookings'),
  where('status', '==', 'approved'),
  where('jobsCreated', '==', false)
);
```

---

## 2Ô∏è‚É£ JOBS COLLECTION ‚≠ê MOST IMPORTANT

### **Collection Name:** `jobs`

### **Document Structure:**
```typescript
{
  // Document ID: Auto-generated by Firestore
  
  // ========== BOOKING REFERENCE ==========
  bookingId: string                    // Required (links to bookings collection)
  bookingRef: {
    id: string
    guestName: string
    checkInDate: string
    checkOutDate: string
    guestCount?: number
    totalAmount?: number
  }
  
  // ========== PROPERTY REFERENCE ==========
  propertyId: string                   // Required (links to properties collection)
  propertyRef: {
    id: string
    name: string
    address: string
  }
  
  // ========== üî¥ MOBILE-CRITICAL FIELDS (MANDATORY) ==========
  propertyPhotos: string[]             // Required: Array of Cloudinary URLs (min 1, recommend 6)
  accessInstructions: string           // Required: Gate codes, keys, WiFi passwords
  specialNotes: string                 // Optional but recommended
  
  location: {
    address: string                    // Required: Full address
    googleMapsLink: string             // Required: Navigation link
    latitude: number                   // Required: GPS coordinate
    longitude: number                  // Required: GPS coordinate
  }
  
  guestCount: number                   // Required: Number of guests (min 1)
  guestName: string                    // Required: Guest name
  
  // ========== JOB DETAILS ==========
  jobType: string                      // Required: 'cleaning' | 'maintenance' | 'inspection' | 'setup' | 'checkout' | 'emergency'
  title: string                        // Required: Job title
  description: string                  // Required: Job description
  priority: string                     // Required: 'low' | 'medium' | 'high' | 'urgent'
  status: string                       // Required: 'pending' | 'assigned' | 'accepted' | 'in_progress' | 'completed' | 'verified' | 'cancelled'
  
  // ========== SCHEDULING ==========
  scheduledDate: Timestamp             // Required: When job should be done
  estimatedDuration: number            // Required: Minutes
  deadline: Timestamp                  // Required: Job must be completed by
  
  // ========== STAFF ASSIGNMENT ==========
  assignedStaffId: string              // Required: Staff document ID
  assignedStaff: {
    id: string
    name: string
    email: string
    phone?: string
    role: string
  }
  assignedAt: Timestamp                // When job was assigned
  
  // ========== REQUIREMENTS ==========
  requiredSkills: string[]             // Required: Skills needed
  requiredSupplies: string[]           // Optional: Supplies needed
  specialInstructions: string          // Optional: Additional instructions
  
  // ========== COMPLETION DATA ==========
  completedAt?: Timestamp              // When job was completed
  completionPhotos?: string[]          // Photos of completed work
  completionNotes?: string             // Staff notes on completion
  verifiedAt?: Timestamp               // Admin verification time
  verifiedBy?: {
    id: string
    name: string
  }
  
  // ========== STATUS HISTORY ==========
  statusHistory?: Array<{
    status: string
    timestamp: Timestamp
    updatedBy: string
    notes?: string
  }>
  
  // ========== METADATA ==========
  createdAt: Timestamp                 // Required (auto-generated)
  updatedAt: Timestamp                 // Required (auto-updated)
  createdBy: string                    // Who/what created the job
  autoAssigned: boolean                // Was it auto-assigned or manual
  
  // ========== NOTIFICATIONS ==========
  notificationSent?: boolean
  notificationId?: string
  pushNotificationSent?: boolean
  lastNotificationAt?: Timestamp
}
```

### **The 7 Required Fields (Validation):**
1. ‚úÖ `propertyPhotos` - array with length > 0
2. ‚úÖ `accessInstructions` - string, not empty
3. ‚úÖ `location.googleMapsLink` - string, not empty
4. ‚úÖ `location.latitude` - number, exists
5. ‚úÖ `location.longitude` - number, exists
6. ‚úÖ `guestCount` - number >= 1
7. ‚úÖ `location.address` - string, not empty

### **Validation Method:**
```typescript
function validateJobPayload(jobData: any): { valid: boolean; missing: string[] } {
  const missing: string[] = [];
  
  if (!Array.isArray(jobData.propertyPhotos) || jobData.propertyPhotos.length === 0) {
    missing.push('propertyPhotos');
  }
  if (!jobData.accessInstructions || jobData.accessInstructions.trim() === '') {
    missing.push('accessInstructions');
  }
  if (!jobData.location?.googleMapsLink || jobData.location.googleMapsLink === '') {
    missing.push('location.googleMapsLink');
  }
  if (!jobData.location?.latitude || !jobData.location?.longitude) {
    missing.push('location.coordinates');
  }
  if (!jobData.guestCount || jobData.guestCount < 1) {
    missing.push('guestCount');
  }
  if (!jobData.location?.address || jobData.location.address.trim() === '') {
    missing.push('location.address');
  }
  
  return { valid: missing.length === 0, missing };
}
```

### **Relationships:**
- `bookingId` ‚Üí `bookings` collection
- `propertyId` ‚Üí `properties` collection
- `assignedStaffId` ‚Üí `staff_accounts` collection

### **Common Queries:**
```typescript
// Get jobs for specific staff member
const q = query(
  collection(db, 'jobs'),
  where('assignedStaffId', '==', staffId),
  where('status', 'in', ['assigned', 'in_progress']),
  orderBy('scheduledDate', 'asc')
);

// Get all active jobs
const q = query(
  collection(db, 'jobs'),
  where('status', 'in', ['assigned', 'in_progress']),
  orderBy('scheduledDate', 'asc')
);

// Get jobs for specific booking
const q = query(
  collection(db, 'jobs'),
  where('bookingId', '==', bookingId)
);
```

---

## 3Ô∏è‚É£ CALENDAR_EVENTS COLLECTION

### **Collection Name:** `calendar_events` ‚ö†Ô∏è WITH UNDERSCORE!

### **Document Structure:**
```typescript
{
  // Document ID: Auto-generated by Firestore
  
  // ========== EVENT DETAILS ==========
  title: string                        // Required: Event title
  description: string                  // Optional: Event description
  
  // ========== DATES (CRITICAL FIELD NAMES!) ==========
  start: Timestamp                     // ‚úÖ CORRECT: Use 'start', NOT 'startDate'
  end: Timestamp                       // ‚úÖ CORRECT: Use 'end', NOT 'endDate'
  
  // ========== TYPE & DISPLAY ==========
  type: string                         // Required: 'check-in' | 'check-out' | 'job'
  color: string                        // Required: Hex color code
  status: string                       // Required: Event status
  
  // ========== REFERENCES ==========
  bookingId?: string                   // Optional: Link to booking (for check-in/check-out)
  jobId?: string                       // Optional: Link to job (for job events)
  propertyId: string                   // Required: Link to property
  propertyName: string                 // Required: Denormalized for display
  
  // ========== JOB-SPECIFIC (if type='job') ==========
  jobType?: string                     // Job type (cleaning, maintenance, etc.)
  assignedStaff?: string               // Staff member name
  assignedStaffId?: string             // Staff document ID
  
  // ========== BOOKING-SPECIFIC (if type='check-in'/'check-out') ==========
  guestName?: string                   // Guest name
  
  // ========== METADATA ==========
  createdAt: Timestamp                 // Required (auto-generated)
  updatedAt: Timestamp                 // Required (auto-updated)
}
```

### **‚ö†Ô∏è CRITICAL: Field Names**
```typescript
// ‚úÖ CORRECT:
{
  start: Timestamp,
  end: Timestamp
}

// ‚ùå WRONG (old naming):
{
  startDate: Timestamp,    // Don't use this!
  endDate: Timestamp       // Don't use this!
}
```

### **Color Coding:**
- Check-in: `#10b981` (green)
- Check-out: `#ef4444` (red)
- Jobs (assigned): `#3b82f6` (blue)
- Jobs (in_progress): `#8b5cf6` (purple)
- Jobs (completed): `#10b981` (green)
- Jobs (overdue): `#fbbf24` (yellow)

### **Relationships:**
- `bookingId` ‚Üí `bookings` collection
- `jobId` ‚Üí `jobs` collection
- `propertyId` ‚Üí `properties` collection
- `assignedStaffId` ‚Üí `staff_accounts` collection

### **Common Queries:**
```typescript
// Get all calendar events
const q = query(
  collection(db, 'calendar_events'),
  orderBy('start', 'asc')
);

// Get events for specific property
const q = query(
  collection(db, 'calendar_events'),
  where('propertyId', '==', propertyId),
  orderBy('start', 'asc')
);

// Get events for date range
const q = query(
  collection(db, 'calendar_events'),
  where('start', '>=', startDate),
  where('start', '<=', endDate),
  orderBy('start', 'asc')
);
```

---

## 4Ô∏è‚É£ STAFF_ACCOUNTS COLLECTION

### **Collection Name:** `staff_accounts` (WITH UNDERSCORE!)

### **Document Structure:**
```typescript
{
  // Document ID: Auto-generated (used as staffId)
  
  // ========== IDENTITY ==========
  name: string                         // Required: Display name
  email: string                        // Required: Email address (unique)
  userId?: string                      // Optional: Firebase Auth UID (if linked)
  
  // ========== AUTHENTICATION ==========
  pin?: string                         // Optional: PIN for quick mobile login (e.g., "1234")
  
  // ========== ROLE & SKILLS ==========
  role: string                         // Required: 'cleaner' | 'housekeeper' | 'maintenance' | 'manager' | 'admin' | 'staff' | 'concierge'
  skills?: string[]                    // Optional: Array of skill names
  
  // ========== CONTACT ==========
  phone?: string                       // Optional: Phone number
  
  // ========== STATUS ==========
  status: string                       // Required: 'active' | 'inactive'
  isActive: boolean                    // Required: Whether account is active
  
  // ========== MOBILE NOTIFICATIONS ==========
  expoPushToken?: string               // Optional: Expo push notification token
  expoPushTokenIsValid?: boolean       // Optional: Token validation status
  lastLoginAt?: Timestamp              // Optional: Last login timestamp
  
  // ========== METADATA ==========
  createdAt: Timestamp                 // Required (auto-generated)
  updatedAt: Timestamp                 // Required (auto-updated)
}
```

### **Test Account:**
```typescript
{
  name: "Cleaner",
  email: "cleaner@siamoon.com",
  pin: "1234",
  userId: "6mywtFzF7wcNg76CKvpSh56Y0ND3",
  role: "cleaner",
  status: "active",
  isActive: true
}
```

### **Authentication Methods:**

**Method 1: Email + Password (Firebase Auth)**
```typescript
const userCredential = await signInWithEmailAndPassword(
  auth, 
  "cleaner@siamoon.com", 
  "password"
);
const staffDoc = await getDoc(
  doc(db, 'staff_accounts', userCredential.user.uid)
);
```

**Method 2: PIN Login (Quick Login)**
```typescript
const q = query(
  collection(db, 'staff_accounts'),
  where('pin', '==', '1234'),
  where('isActive', '==', true),
  limit(1)
);
const snapshot = await getDocs(q);
const staffDoc = snapshot.docs[0];
```

### **Common Queries:**
```typescript
// Get all active staff
const q = query(
  collection(db, 'staff_accounts'),
  where('isActive', '==', true)
);

// Get staff by role
const q = query(
  collection(db, 'staff_accounts'),
  where('role', '==', 'cleaner'),
  where('isActive', '==', true)
);

// Get staff by email
const q = query(
  collection(db, 'staff_accounts'),
  where('email', '==', 'cleaner@siamoon.com')
);
```

---

## 5Ô∏è‚É£ PROPERTIES COLLECTION

### **Collection Name:** `properties`

### **Document Structure:**
```typescript
{
  // Document ID: Auto-generated by Firestore
  
  // ========== BASIC INFO ==========
  name: string                         // Required: Property name
  description?: string                 // Optional: Property description
  
  // ========== ADDRESS ==========
  address: {
    fullAddress: string                // Required: Complete address
    city?: string                      // Optional: City
    country?: string                   // Optional: Country
    coordinates?: {
      latitude: number                 // Required for jobs: GPS latitude
      longitude: number                // Required for jobs: GPS longitude
    }
    googleMapsLink?: string            // Required for jobs: Navigation link
  }
  
  // ========== DETAILS ==========
  bedrooms?: number                    // Optional: Number of bedrooms
  bathrooms?: number                   // Optional: Number of bathrooms
  maxGuests?: number                   // Optional: Maximum guests
  amenities?: string[]                 // Optional: Array of amenity names
  
  // ========== üî¥ MOBILE-CRITICAL FIELDS ==========
  images: string[]                     // Required: Array of Cloudinary URLs (minimum 6 recommended)
  accessInstructions: string           // Required: Gate codes, keys, WiFi passwords
  specialNotes?: string                // Optional: Special instructions
  
  // ========== STATUS ==========
  status: string                       // Required: 'active' | 'inactive' | 'pending_approval'
  isActive: boolean                    // Required: Whether property is active
  
  // ========== METADATA ==========
  userId: string                       // Required: Property owner Firebase Auth UID
  createdAt: Timestamp                 // Required (auto-generated)
  updatedAt: Timestamp                 // Required (auto-updated)
}
```

### **Example (Complete Property):**
```typescript
{
  name: "Test Villa Paradise",
  images: [
    "https://res.cloudinary.com/.../photo1.jpg",
    "https://res.cloudinary.com/.../photo2.jpg",
    "https://res.cloudinary.com/.../photo3.jpg",
    "https://res.cloudinary.com/.../photo4.jpg",
    "https://res.cloudinary.com/.../photo5.jpg",
    "https://res.cloudinary.com/.../photo6.jpg"
  ],
  accessInstructions: "Gate Code: #1234*, #5678*\nPool: 9999\nWiFi: VillaParadise_Guest / Welcome2026\nKeys: Under mat",
  address: {
    fullAddress: "123 Beach Road, Rawai, Phuket 83100, Thailand",
    city: "Phuket",
    country: "Thailand",
    coordinates: {
      latitude: 7.8804,
      longitude: 98.3923
    },
    googleMapsLink: "https://www.google.com/maps/search/?api=1&query=7.8804,98.3923"
  },
  status: "active",
  isActive: true
}
```

### **Common Queries:**
```typescript
// Get all active properties
const q = query(
  collection(db, 'properties'),
  where('isActive', '==', true)
);

// Get properties by owner
const q = query(
  collection(db, 'properties'),
  where('userId', '==', ownerId)
);

// Get specific property
const propertyDoc = await getDoc(
  doc(db, 'properties', propertyId)
);
```

---

## üîó COLLECTION RELATIONSHIPS

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ    bookings     ‚îÇ (Source of truth)
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
         ‚îÇ
         ‚îú‚îÄ propertyId ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
         ‚îÇ                                  ‚îÇ
         ‚îú‚îÄ status='approved' triggers     ‚îÇ
         ‚îÇ  AutomaticJobCreationService    ‚îÇ
         ‚îÇ                                  ‚îÇ
         ‚ñº                                  ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê              ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ      jobs       ‚îÇ              ‚îÇ   properties    ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§              ‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ bookingId ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÇ                 ‚îÇ
‚îÇ propertyId ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§                 ‚îÇ
‚îÇ assignedStaffId‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê       ‚îÇ images[]        ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò      ‚îÇ       ‚îÇ accessInstructions
         ‚îÇ               ‚îÇ       ‚îÇ coordinates     ‚îÇ
         ‚îÇ               ‚îÇ       ‚îÇ googleMapsLink  ‚îÇ
         ‚îÇ               ‚îÇ       ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
         ‚îÇ               ‚îÇ
         ‚îÇ               ‚ñº
         ‚îÇ      ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
         ‚îÇ      ‚îÇ staff_accounts  ‚îÇ
         ‚îÇ      ‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
         ‚îÇ      ‚îÇ email, pin      ‚îÇ
         ‚îÇ      ‚îÇ role, status    ‚îÇ
         ‚îÇ      ‚îÇ expoPushToken   ‚îÇ
         ‚îÇ      ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
         ‚îÇ
         ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇcalendar_events  ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ jobId ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ bookingId       ‚îÇ      ‚îÇ
‚îÇ propertyId      ‚îÇ      ‚îÇ
‚îÇ start, end      ‚îÇ      ‚îÇ
‚îÇ type, color     ‚îÇ      ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò      ‚îÇ
                         ‚îÇ
                    (Display in
                     Calendar View)
```

---

## üéØ FIELD NAME CONSISTENCY GUIDE

### **Date Fields:**
| Context | Field Name | Type |
|---------|-----------|------|
| Booking check-in | `checkInDate` OR `checkIn` | Timestamp/string |
| Booking check-out | `checkOutDate` OR `checkOut` | Timestamp/string |
| Job scheduled | `scheduledDate` | Timestamp |
| Job deadline | `deadline` | Timestamp |
| **Calendar event start** | **`start`** ‚úÖ | **Timestamp** |
| **Calendar event end** | **`end`** ‚úÖ | **Timestamp** |

### **Collection Names:**
| Collection | Correct Name | Wrong Name |
|-----------|--------------|------------|
| Bookings | `bookings` ‚úÖ | `pending_bookings`, `confirmed_bookings` |
| Jobs | `jobs` ‚úÖ | - |
| Calendar | `calendar_events` ‚úÖ | `calendarEvents` ‚ùå |
| Staff | `staff_accounts` ‚úÖ | `staff` ‚ùå |
| Properties | `properties` ‚úÖ | - |

### **Status Values:**

**Bookings:**
- `pending` - Waiting for approval
- `approved` - Approved, triggers job creation
- `confirmed` - Fully confirmed
- `cancelled` - Cancelled booking

**Jobs:**
- `pending` - Created, waiting for staff
- `assigned` - Assigned to staff member
- `accepted` - Staff accepted the job
- `in_progress` - Staff working on it
- `completed` - Staff marked complete
- `verified` - Admin verified
- `cancelled` - Job cancelled

---

## üìù QUICK LOOKUP: Critical Fields

### **For Mobile App (Jobs):**
```
MUST HAVE (7 fields):
‚úÖ propertyPhotos (array)
‚úÖ accessInstructions (string)
‚úÖ location.googleMapsLink (string)
‚úÖ location.latitude (number)
‚úÖ location.longitude (number)
‚úÖ guestCount (number)
‚úÖ location.address (string)
```

### **For Calendar Display:**
```
MUST HAVE:
‚úÖ start (Timestamp) - NOT startDate
‚úÖ end (Timestamp) - NOT endDate
‚úÖ title (string)
‚úÖ type (string)
‚úÖ color (string)
```

### **For Staff Authentication:**
```
MUST HAVE:
‚úÖ email (string)
‚úÖ name (string)
‚úÖ role (string)
‚úÖ isActive (boolean)

OPTIONAL BUT RECOMMENDED:
- pin (string) - for quick login
- userId (string) - Firebase Auth UID
- expoPushToken (string) - for notifications
```

---

## üö® COMMON MISTAKES TO AVOID

### **‚ùå Wrong Collection Name:**
```typescript
// ‚ùå WRONG:
collection(db, 'calendarEvents')  // Missing underscore

// ‚úÖ CORRECT:
collection(db, 'calendar_events')  // With underscore
```

### **‚ùå Wrong Field Names (Calendar):**
```typescript
// ‚ùå WRONG:
{
  startDate: Timestamp,
  endDate: Timestamp
}

// ‚úÖ CORRECT:
{
  start: Timestamp,
  end: Timestamp
}
```

### **‚ùå Missing Validation:**
```typescript
// ‚ùå WRONG: Create job without validation
await addDoc(collection(db, 'jobs'), jobData);

// ‚úÖ CORRECT: Validate before creating
const validation = validateJobPayload(jobData);
if (!validation.valid) {
  throw new Error(`Missing: ${validation.missing.join(', ')}`);
}
await addDoc(collection(db, 'jobs'), jobData);
```

### **‚ùå Reading from Wrong Collection:**
```typescript
// ‚ùå WRONG: Only reading from live_bookings (empty)
const snapshot = await getDocs(collection(db, 'live_bookings'));

// ‚úÖ CORRECT: Read from bookings (primary)
const snapshot = await getDocs(collection(db, 'bookings'));
```

---

## üìö USEFUL FIRESTORE PATHS

### **Production Console:**
```
https://console.firebase.google.com/project/operty-b54dc/firestore
```

### **Collection Paths:**
```
/bookings
/jobs
/calendar_events
/staff_accounts
/properties
/notifications
/staff_locations
```

### **Example Document Paths:**
```
/bookings/zQgzGqPCMu5DFNBFxA7T
/jobs/i1KEsJJF4VLKS6TaT2Wo
/calendar_events/{eventId}
/staff_accounts/dEnHUdPyZU0Uutwt6Aj5
/properties/ZBlZH1VLYfAhaiEw3I5C
```

---

## üéØ SUMMARY CHECKLIST

### **Before Querying:**
- [ ] Verify collection name (with/without underscore)
- [ ] Check field names (start/end vs startDate/endDate)
- [ ] Confirm indexes exist for query
- [ ] Validate Firebase initialized

### **Before Creating Jobs:**
- [ ] Fetch complete property data
- [ ] Validate 7 required fields
- [ ] Generate Google Maps link
- [ ] Extract GPS coordinates
- [ ] Assign staff member

### **Before Displaying Calendar:**
- [ ] Use 'calendar_events' collection
- [ ] Use 'start' and 'end' fields
- [ ] Set up real-time listener
- [ ] Apply color coding

### **Before Mobile App Integration:**
- [ ] Verify job payload 100% complete
- [ ] Test authentication (email or PIN)
- [ ] Configure push tokens
- [ ] Test API endpoints

---

**Generated:** January 5, 2026  
**Version:** 1.0  
**Status:** ‚úÖ Complete Quick Reference  
**Keep this handy:** Bookmark for daily development!

---

üéØ **QUICK ACCESS TO ANY COLLECTION STRUCTURE!** üéØ
